<!DOCTYPE html>



<html>
    <head>
        <meta charset="UTF-8">
            
        <link href="./bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet" >
        <script src="./bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js" ></script>



        <script>


            var yamaha_ip_address='http://192.168.1.106';
            var systemfeatures = {};
            var systemstatus = {};

            //static functions
            var functions = {'play': yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=play',
            'stop':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=stop',
            'pause':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=pause',
            'play_pause':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=play_pause',
            'next':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=next',
            'previous':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=previous',
            'shuffle':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/toggleShuffle',
            'repeat':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/toggleRepeat',
            'getfeatures': yamaha_ip_address+'/YamahaExtendedControl/v1/system/getFeatures',
            }

            window.setInterval (getStatus,2000);



            function buildurls ()
            {
            functions = {'play': yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=play',
            'stop':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=stop',
            'pause':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=pause',
            'play_pause':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=play_pause',
            'next':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=next',
            'previous':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/setPlayback?playback=previous',
            'shuffle':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/toggleShuffle',
            'repeat':yamaha_ip_address+'/YamahaExtendedControl/v1/netusb/toggleRepeat',
            'getfeatures': yamaha_ip_address+'/YamahaExtendedControl/v1/system/getFeatures',
            'poweronoff': yamaha_ip_address+'/YamahaExtendedControl/v1/'+systemfeatures.zone[0].id +'/setPower?power=toggle',
            'mute': yamaha_ip_address+'/YamahaExtendedControl/v1/'+systemfeatures.zone[0].id +'/setMute?enable='+ (systemstatus.mute?'false':'true')

            }
            }


            function getfeatures ()
            {
                const request  = new XMLHttpRequest ();
                request.responseType='json';
                request.onload = function () {
                        systemfeatures = this.response;
                        getStatus();
                        
                        
                        
                }
                request.open ('GET', functions['getfeatures'] , true);
                request.send();
                
            }

            
            function getStatus ()
            {
                const request  = new XMLHttpRequest ();
                request.responseType='json';
                request.onload = function () {
                        systemstatus = this.response;
                        //alert (JSON.stringify(systemstatus));
                        buildurls ();
                        
                }
                request.open ('GET', yamaha_ip_address+'/YamahaExtendedControl/v1/'+systemfeatures.zone[0].id+'/getStatus' , true );
                request.send();
                
            }
       
            function get_result (buttonfunc){

                const request = new XMLHttpRequest();
                request.responseType='json';
                request.onload = function (){
                    
                    if (this.response['response_code'] != 0 )
                    {
                        alert (this.response['response_code']);
                        
                    }
                    //alert (JSON.stringify(systemstatus));

                    getStatus();
                return this.response;    
                
                }


                url = functions[buttonfunc];
                //url = "http://192.168.1.106/YamahaExtendedControl/v1/netusb/setPlayback?playback=next";
                //console.log (url);
                //alert (systemstatus.mute);
                //alert (url);
                request.open ("GET",url,true);
                request.send();
        
            }

            window.onload = function () {
             getfeatures();

            }

        </script>

    </head>
    <body>
        <header>

        </header>
        <main>
            <div class="container">



                <div class="row">
                    <div class="col-12 d-flex justify-content-end">
                        <img src="./img/power-off-solid.svg" width="50" height="50" class="m-2" onclick="get_result('poweronoff')"> 

                    </div>

                </div>

                <div class="container ">
                    <div class="row gy-3 gx-3" >
                        <div class="col" >
                            <img src="./img/napster_logo.png"    width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/spotify-logo-black.jpg"  width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/qobuz_logo.png" width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/tidal_logo.png" width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/deezer_logo.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/airplay_logo.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/shared_folder_icon.png" width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/netradio_icon.png" width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/bluetooth_icon.png" width="100" height="100" alt="">
                        </div>
                        <div class="col">
                            <img src="./img/usb_icon.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/radio_icon.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/note.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/note.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/note.png" width="100" height="100" alt="">
                        </div>

                        <div class="col">
                            <img src="./img/note.png" width="100" height="100" alt="">
                        </div>


                    </div>
                




                </div>




                <div class="row">
                    <div class="col-12 d-flex justify-content-center">
                        <button type="button" class="btn btn-success  " onclick="get_result('mute') " >
                            MUTE
                        </button>
                    </div>
                    
                </div>

                <div class="row">
                    <div class="col-12"></div>
                </div>

                <div class="row">
                    <div class="col-4 d-grid gap-2 ">
                        <button type="button" class="btn btn-success m-2 " onclick="get_result('repeat') " >
                            REPEAT
                        </button>
                    </div>
                    <div class="col-4 d-grid gap-2 ">
                        <button type="button" class="btn btn-success m-2" onclick="get_result('play_pause') " >
                            >/||
                        </button>
                    </div>
                    <div class="col-4 d-grid gap-2 ">
                        <button type="button" class="btn btn-success m-2 "onclick="get_result('shuffle') " >
                            SHUFFLE
                        </button>
                    </div>
                </div>


                <div class="row">
                    <div class="col-4 d-grid gap-2 ">
                        <button type="button" class="btn btn-success m-2 " onclick="get_result('previous') " >
                            |<<
                        </button>
                    </div>
                    <div class="col-4 d-grid gap-2 ">
                        <button type="button" class="btn btn-success  m-2" onclick="get_result('stop') " >
                            []
                        </button>

                    </div>
                    <div class="col-4 d-grid gap-2">
                        <button type="button" class="btn btn-success m-2" onclick="get_result('next') " >
                            >>|
                        </button>
                    </div>



                </div>
            </div>

            
        </main>
        <footer>

        </footer>

    </body>
</html>